<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>service.ipcdatastore &mdash; service.ipcdatastore 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="service.ipcdatastore 0.1.0 documentation" href="index.html" />
    <link rel="prev" title="script.module.ipc" href="script.module.ipc.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="script.module.ipc.html" title="script.module.ipc"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">service.ipcdatastore 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">service.ipcdatastore</a><ul>
<li><a class="reference internal" href="#add-on-settings-page">Add On Settings Page</a></li>
<li><a class="reference internal" href="#simple-use-case-of-ipcclientx">Simple use case of IPCClientX</a><ul>
<li><a class="reference internal" href="#caching-mechanism">Caching mechanism</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanved-usage-of-ipcclientx">Advanved usage of IPCClientX</a></li>
<li><a class="reference internal" href="#class-methods-from-service-ipcdatastore">Class methods from service.ipcdatastore</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="script.module.ipc.html"
                        title="previous chapter">script.module.ipc</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/service.ipcdatastore.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="service-ipcdatastore">
<h1>service.ipcdatastore<a class="headerlink" href="#service-ipcdatastore" title="Permalink to this headline">¶</a></h1>
<div class="section" id="add-on-settings-page">
<h2>Add On Settings Page<a class="headerlink" href="#add-on-settings-page" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/ipc-settings.png"><img alt="_images/ipc-settings.png" class="align-left" src="_images/ipc-settings.png" style="width: 250px;" /></a>
<p>There are several configurable settings for the addon:</p>
<blockquote>
<div><ol class="arabic simple">
<li>The name to be used to address the object being shared. This is an arbitrary string.</li>
<li>The socket host name.</li>
<li>The socket port.</li>
<li>Whether to start the server at startup.</li>
<li>A simple test to assess if the server is working correctly which runs on clicking.</li>
<li>Whether or not to place data regarding the currently playing video in the datastore automatically.</li>
<li>Whether or not to show the above data as a notification when a video begins playing.</li>
<li>A more detailed testing suite for the datastore object&#8217;s methods which runs when clicked.</li>
</ol>
</div></blockquote>
<p><strong>Note:</strong> When using the class IPCClientX (described below) if the addon id is specified, an attempt will be made to
retrieve the object name, host name and port from that addon&#8217;s settings.xml. Thus, if <code class="docutils literal"><span class="pre">addon_id='service.ipcdatastore'</span></code>
is provided, then these settings will be read in, even if the code is running in another addon.</p>
</div>
<hr class="docutils" />
<div class="section" id="simple-use-case-of-ipcclientx">
<h2>Simple use case of IPCClientX<a class="headerlink" href="#simple-use-case-of-ipcclientx" title="Permalink to this headline">¶</a></h2>
<p>IPCClientX is really a class that wraps some core functionality of a shared dictionary object. Objects are stored in
the dictionary under a key consisting of the object&#8217;s &#8220;name&#8221; and &#8220;author&#8221;. This was implemented in this manner to
prevent naming conflicts if serveral different addons are placing objects in the datastore.</p>
<p>The name is required at the time that the data is stored using :func: <cite>IPCClientX.set</cite>. If the author is not provided
and the code is running under an addon whose id is available, that will be used. No addon id will be available when
the code is running from a &#8216;RunScript&#8217; statement and an exception will be raised. Each object is time-stamped as it
is stored.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre> <span class="c"># Depending where this code is run from the location of the import may differ</span>

 <span class="kn">from</span> <span class="nn">resources.lib.ipcclientx</span> <span class="kn">import</span> <span class="n">IPCClientX</span>

<span class="hll"> <span class="n">client</span> <span class="o">=</span> <span class="n">IPCClientX</span><span class="p">(</span><span class="n">addon_id</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">)</span>
</span> <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">server_available</span><span class="p">():</span>
<span class="hll">     <span class="n">x</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">)</span>
</span></pre></div>
</td></tr></table></div>
<p>On line 5, the client is instantiated using the <code class="docutils literal"><span class="pre">addon_id</span></code> syntax option. This cause the client to read the name,
host and port settings from the addon whose id is provided. This allows any other addon to discover the server&#8217;s
settings at the time of instantiation instead of having to hard code it.</p>
<p>Line 6 first checks to see if the server is available using the inherited method from IPCClient from script.module.ipc.
This isn&#8217;t truly necessary, but provides a graceful means of failure if the server is not up.</p>
<p>Line 7 then stores the object, in this case, an integer using the name &#8216;x&#8217;. The author is explicitly given using a
keyword.</p>
<hr class="docutils" />
<dl class="docutils">
<dt>Retrieving the data is much as expected except that there are two additional optional keyword parameters:</dt>
<dd><ol class="first last arabic simple">
<li><code class="docutils literal"><span class="pre">requestor</span></code></li>
<li><code class="docutils literal"><span class="pre">return_tuple</span></code></li>
</ol>
</dd>
</dl>
<p>The name of the data requestor may be provided, which also defaults to the addon name if not provided. This is used in the caching
mechanism (see below).</p>
<p>If <code class="docutils literal"><span class="pre">return_tuple</span></code> is False (default) the returned object is of the same &#8216;type&#8217; as when it was stored. If
<code class="docutils literal"><span class="pre">return_tuple</span></code> if True, the return is a namedtuple with three attributes: <em>value</em>, <em>ts</em> and <em>cached</em>. The <em>value</em> is
the actual object, <em>ts</em> is the timestamp (float) and <em>cached</em> is a boolean indicating if a cached value was used.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre> <span class="c"># Again, depending where this code is run from the location of the import may differ</span>

 <span class="kn">from</span> <span class="nn">resources.lib.ipcclientx</span> <span class="kn">import</span> <span class="n">IPCClientX</span>

 <span class="n">client</span> <span class="o">=</span> <span class="n">IPCClientX</span><span class="p">(</span><span class="n">addon_id</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">)</span>
 <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">server_available</span><span class="p">():</span>
<span class="hll">     <span class="n">x</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">,</span> <span class="n">requestor</span><span class="o">=</span><span class="s">&#39;testclient&#39;</span><span class="p">)</span>
</span>     <span class="n">xbmc</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;service.ipcdatastore variable &#39;x&#39; = {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
 <span class="k">else</span><span class="p">:</span>
     <span class="n">xbmc</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;service.ipcdatastore server unavailable&quot;</span><span class="p">)</span>

 <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">server_available</span><span class="p">():</span>
<span class="hll">     <span class="n">nt</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">,</span> <span class="n">requestor</span><span class="o">=</span><span class="s">&#39;testclient&#39;</span><span class="p">,</span> <span class="n">return_tuple</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">     <span class="n">x</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">value</span>
</span><span class="hll">     <span class="n">ts</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">ts</span>
</span><span class="hll">     <span class="n">cached</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">cached</span>
</span></pre></div>
</td></tr></table></div>
<p>Line 7 retrieves the data as described above, while lines 13-16 illustrate the use of the namedtuple. The value of
cached is provided mostly for testing purposes. The way the cache is implemented, there should be no circumstances
where a cached object has become &#8216;stale&#8217;. See below.</p>
<div class="section" id="caching-mechanism">
<h3>Caching mechanism<a class="headerlink" href="#caching-mechanism" title="Permalink to this headline">¶</a></h3>
<p>Each time data is retrieved, the requestor and the ts of the data requested are stored on the server side. The data is
also stored on the client side. Also, at the time of each request, the server looks to see if the data has already been
provided to the current requestor and if so, if the current data timestamp is the same as what was provided to the
requestor during the last request. If it is, a one-byte message is returned instead of the object instructing the client
to look for the data in it&#8217;s own local cache. If for some reason, the data is NOT in the local cache, another request
is sent with a tag instructing the server to provide the data regardless.</p>
<p>This was implemented for performance purposes to minimize the amount of the data sent &#8216;over-the-wire&#8217;. In addition when
there is asynchronous data being provided and consumed, it will allow a consuming client to wait in a request loop
without transferring data with each request. This is illustrated in the following example.</p>
</div>
</div>
<div class="section" id="advanved-usage-of-ipcclientx">
<h2>Advanved usage of IPCClientX<a class="headerlink" href="#advanved-usage-of-ipcclientx" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre>import xbmc
from getlog...

class PlayerServer(xbmc.Player):

    def __init__(self):
        super(PlayerServer, self).__init__()
        self.playingfile = None
        self.server_flag = False

    def onPlayBackStarted(self):
        self.playingfile = self.getPlayingFile()
        mydict = get_log_mediainfo()
        client = IPCClientX(addon_id=&#39;service.ipcdatastore&#39;)
        client.raise_exception = True
        client.set(&#39;videodata&#39;, mydict, author=&#39;service.ipcdatastore&#39;)
        self.server_flag = True
        del client
</pre></div>
</td></tr></table></div>
<p>xxx</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">xbmc</span>
<span class="k">class</span> <span class="nc">PlayerClient</span><span class="p">(</span><span class="n">xbmc</span><span class="o">.</span><span class="n">Player</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PlayerClient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playingfile</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">onPlayBackStarted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playingfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPlayingFile</span><span class="p">()</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">IPCClientX</span><span class="p">(</span><span class="n">addon_id</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">numchecks</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="k">while</span> <span class="n">numchecks</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;videodata&#39;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">&#39;service.ipcdatastore&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">xbmc</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
                <span class="n">numchecks</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">xbmcgui</span><span class="o">.</span><span class="n">Dialog</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;{0}x{1} @ {2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;dwidth&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;dheight&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;fps&#39;</span><span class="p">])</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">notification</span><span class="p">(</span><span class="s">&#39;ipcdatastore&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">notification</span><span class="p">(</span><span class="s">&#39;ipcdatastore&#39;</span><span class="p">,</span> <span class="s">&#39;Time out error receiving data x {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">9</span> <span class="o">-</span> <span class="n">numchecks</span><span class="p">),</span>
                                <span class="bp">None</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="class-methods-from-service-ipcdatastore">
<h2>Class methods from service.ipcdatastore<a class="headerlink" href="#class-methods-from-service-ipcdatastore" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ipcclientx.IPCClientX">
<em class="property">class </em><code class="descclassname">ipcclientx.</code><code class="descname">IPCClientX</code><span class="sig-paren">(</span><em>addon_id=''</em>, <em>name='kodi-IPC'</em>, <em>host='localhost'</em>, <em>port=9099</em>, <em>datatype='pickle'</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">ipc.ipcclient.IPCClient</span></code></p>
<p>Subclasses IPCClient from script.module.ipc and extends functionality for a datastore object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>addon_id</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; If specified, this supersedes the name/port/host. Checks settings.xml for the info.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Arbitrary name for the object being used, must match the name used by server</li>
<li><strong>port</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Port matching server port</li>
<li><strong>datatype</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Type of data transport being used options: pickle, serpent, json, marshall. Must match server</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>There are two useful <em>public</em> attributes than can be changed after instantiation:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">raise_exception</span></code>:</td>
<td><div class="first last line-block">
<div class="line">When set to True, will raise exceptions that can be caught rather than</div>
<div class="line">failing silently, which is the default behavior.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">num_of_server_retries</span></code>:</td>
<td><div class="first last line-block">
<div class="line">If the client fails to connect to the server, the number of retries before</div>
<div class="line">failing finally.</div>
</div>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ipcclientx.IPCClientX.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>author=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a value on the server. Automatically adds the addon name as the author. The value is any valid object
that can be accepted by the chosen datatype (see <code class="xref py py-class docutils literal"><span class="pre">above</span></code>). If the class attribute raise_exception is True,
will raise an exception with failure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<em>Any object type compatible with the datatype transport</em>) &#8211; The variable name</li>
<li><strong>value</strong> &#8211; The value of the variable</li>
<li><strong>author</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The originator of the data which along with the variable name is used as the primary key
for the backend dictionary for storing the item</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True for success, False for failure</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">bool</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em>, <em>author=None</em>, <em>requestor=None</em>, <em>return_tuple=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves data from the server based on author and variable name, optionally returns a
<a class="reference external" href="http://docs.python.org/library/collections.html#collections.namedtuple" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">namedtuple</span></code></a> which also includes time stamp (float) and a bool representing
whether or not the item came from the local cache.
There is a caching function implemented such that the server tracks addon requests for data - if the most recent
version has already been received by the client, a message is sent to the client to look in it&#8217;s cache for the
data. There is a fallback such that if the data is NOT in the cache, the server then provides the data. Each
piece of data that is received is locally cached for this purpose.</p>
<p>If returning a <a class="reference external" href="http://docs.python.org/library/collections.html#collections.namedtuple" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">namedtuple</span></code></a>, the parameters can be accessed as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">nt</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">&#39;me&#39;</span><span class="p">,</span> <span class="n">requestor</span><span class="o">=</span><span class="s">&#39;me&#39;</span><span class="p">,</span> <span class="n">return_tuple</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">value</span>
<span class="n">x_timestamp</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">ts</span>
<span class="n">x_was_cached</span> <span class="o">=</span> <span class="n">nt</span><span class="o">.</span><span class="n">cached</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The variable name</li>
<li><strong>author</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The author of the data. All of the data is indexed by author and variable name in order to reduce
variable name overlap. If not supplied, the addon name is used.</li>
<li><strong>requestor</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The name of the requestor of the data. Defaults to the addon name if found. Used for caching</li>
<li><strong>return_tuple</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether to return the stored object or a named tuple containing the object, the timestamp
and a bool indicating that the object came from the local cache. The named tuple returns
the the names value, ts and cached.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Either the value(object) assigned to &#8216;name&#8217; or a <a class="reference external" href="http://docs.python.org/library/collections.html#collections.namedtuple" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">namedtuple</span></code></a>
containing the value, ts and/or if the item came from the local cache.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">object or <a class="reference external" href="http://docs.python.org/library/collections.html#collections.namedtuple" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">namedtuple</span></code></a> defined as:
<code class="docutils literal"><span class="pre">('Data',</span> <span class="pre">['value',</span> <span class="pre">'ts',</span> <span class="pre">'cached'])</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>name</em>, <em>author=None</em>, <em>return_tuple=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes an item from the datastore and returns the deleted item&#8217;s value. Returns None if not found or raises
an exception if the IPCClientX.raise_exceptions attribute is set to True. The return item is optionally returned
as a namedtuple (see <code class="xref py py-func docutils literal"><span class="pre">get()</span></code>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">object or <a class="reference external" href="http://docs.python.org/library/collections.html#collections.namedtuple" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">namedtuple</span></code></a>, None on failure</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.get_data_list">
<code class="descname">get_data_list</code><span class="sig-paren">(</span><em>author=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.get_data_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves either a dict or list containing the variables names stored on the server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>author</strong> (<em>str or None</em>) &#8211; The author of the data or object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A dictionary containing the authors as key and their variable names as a list. If author specified,
returns a list with the variable names. Returns None on failure or raises an exception.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict or list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.clearall">
<code class="descname">clearall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.clearall" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all of the data on the server. Use with caution if multiple users are storing data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True on success, False on failure</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.clearcache">
<code class="descname">clearcache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.clearcache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears both the local cache and the server cache for the given addon calling using the addon name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True on success, False on failure.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.savedata">
<code class="descname">savedata</code><span class="sig-paren">(</span><em>author=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.savedata" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves all of the data for a given author as a pickle object in the addon_data directory for
service.ipcdatastore. Plan is to implement a way to do this automatically on server shutdown.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True on success, False on failure</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ipcclientx.IPCClientX.restoredata">
<code class="descname">restoredata</code><span class="sig-paren">(</span><em>author=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ipcclientx.IPCClientX.restoredata" title="Permalink to this definition">¶</a></dt>
<dd><p>Restores data on the server from a previously saved pickle (see <code class="xref py py-func docutils literal"><span class="pre">savedata()</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True on success, False on failure</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="index-0"></span></div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="script.module.ipc.html" title="script.module.ipc"
             >previous</a> |</li>
        <li><a href="index.html">service.ipcdatastore 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, KenV99.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
    </div>
  </body>
</html>