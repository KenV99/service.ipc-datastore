<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Background and Features &mdash; service.ipcdatastore 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="service.ipcdatastore 0.1.0 documentation" href="index.html" />
    <link rel="next" title="script.module.ipc" href="script.module.ipc.html" />
    <link rel="prev" title="service.ipcdatastore documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="script.module.ipc.html" title="script.module.ipc"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="service.ipcdatastore documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">service.ipcdatastore 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Background and Features</a><ul>
<li><a class="reference internal" href="#features-of-service-ipcdatastore">Features of service.ipcdatastore</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">service.ipcdatastore documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="script.module.ipc.html"
                        title="next chapter">script.module.ipc</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/background.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="background-and-features">
<h1>Background and Features<a class="headerlink" href="#background-and-features" title="Permalink to this headline">¶</a></h1>
<p id="index-0">The addon <strong>service.ipcdatastore</strong> is utilizes the module (<strong>script.module.ipc</strong>) to create
a datastore that may be used <em>to transfer objects/data between different python processes</em>. This serves 1) to
demonstrate how <strong>script.module.ipc</strong> can be used and 2) to provide a working server that can be used without
further modification to share data amongst Kodi python addons.</p>
<p><em>Background:</em> Moving data between python process is somewhat difficult in Kodi. Thankfully, there are relatively
few situations where this is needed. Examples of these are:</p>
<blockquote>
<div><ol class="arabic simple">
<li>A background service needs to provide data to a plugin script invoked by the user. This can be preferable
in situations where the data gathered by the service is via relatively slow channels (external http scraping)
and there is an unacceptable delay when the script is invoked.</li>
<li>A script is invoked by RunScript in keyboard.xml or settings.xml in order to implement a hotkey or make
make other changes and these changes need to be communicated to a background service.</li>
<li>The same I/O bound data is required by several different processes and it would be more economical to have
it gathered only once and then retrieved by all.</li>
</ol>
</div></blockquote>
<p>There are a number of possible ways this type of data sharing may be implemented in Python. Some of these include:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Saving data to a file which can then be read back in from another process</li>
<li>Saving data to a hidden field in on addon&#8217;s settings.xml which is read by another</li>
<li>Using shared memory space with mmap</li>
<li>Using sockets to move data with a simple python dict for volatile data or a sql based backend for storage.</li>
</ol>
</div></blockquote>
<p>The module <strong>script.module.ipc</strong> contains <strong>Pyro4</strong> packaged for Kodi. Pyro4 stands for Python Remote Objects. The
author of this package is Irmen de Jong and the original package and it&#8217;s documentation can be found
at: <a class="reference external" href="https://pythonhosted.org/Pyro4/">https://pythonhosted.org/Pyro4/</a> Pyro4 is coded entirely in Python, making it suitable for potential inclusion in
the official Kodi repo.</p>
<p>In brief, Pyro4 provides a socket interface and a serializer to allow interprocess communication. Using these, objects
may be moved between processes. How complex these objects are is dependent on the serializer. In the implementation
provided, <em>pickle</em> is used as the default serializer. The main drawback to pickle is that there are security issues,
however in the vast majority of situations, this will be used exclusively on one machine and these security concerns
are moot as long as the external firewall keeps the port(s) used from being exposed. On the plus side, of the available
serializers, pickle is compatible with more complex object types and is the best performing.</p>
<p>The addon directory for <strong>script.module.ipc</strong> contains a lib folder with a directory for Pyro4 (made lower case for
official repo compatibility) and a module directory called <em>ipc</em> which contains two lightweight classes that can
be imported to use pyro4 with a specified port to share and access objects. The details of these two lightweight
classes and coding examples can be found <a class="reference internal" href="script.module.ipc.html#script-module-ipc"><em>here</em></a>.</p>
<div class="section" id="features-of-service-ipcdatastore">
<span id="index-1"></span><h2>Features of service.ipcdatastore<a class="headerlink" href="#features-of-service-ipcdatastore" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Share data (objects) with minimal additional coding</li>
<li>Optionally start the server with Kodi</li>
<li>Configurable host and port</li>
<li>Utilizes a combined server/client caching mechanism for improved performance</li>
<li>Tests run at the time of startup and additional tests via the settings page</li>
<li>Optionally automatically place video info on the server each time a file or stream plays</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="script.module.ipc.html" title="script.module.ipc"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="service.ipcdatastore documentation"
             >previous</a> |</li>
        <li><a href="index.html">service.ipcdatastore 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, KenV99.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
    </div>
  </body>
</html>